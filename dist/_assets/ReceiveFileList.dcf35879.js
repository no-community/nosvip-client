import{c as e,a as s,w as t,d as i,p as a,e as n,r as o,f as l,F as r,h as c,t as d,b as f}from"./index.0960d793.js";class u{constructor(e){this.file=e,this.reader=new FileReader,this.offset=0}getNextChunk(){return new Promise((e,s)=>{this.offset>=this.file.size&&e({done:!0}),this.reader.onload=s=>{const t=s.target.result;this.offset+=t.byteLength,e({done:this.offset>=this.file.size,chunk:t,offset:this.offset})},this.reader.onabort=()=>{s(new Error("FileReader abort"))},this.reader.onerror=e=>{s(new Error("FileReader onerror"+e))};const t=this.file.slice(this.offset,this.offset+65536);this.reader.readAsArrayBuffer(t)})}}const p=e=>{if(null==e||""==e)return"0 Bytes";var s,t=new Array("Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"),i=parseFloat(e);s=Math.floor(Math.log(i)/Math.log(1024));var a=i/Math.pow(1024,s);return(a=a.toFixed(2))+t[s]};class v{constructor(e){this.id=e.id,this.name=e.name,this.size=e.size,this.status=e.status,this.precent=0}}var h={setup:(e,s)=>({onSelectFiles:e=>{s.emit("onSelectFiles",e)},onChoseFile:()=>{document.getElementById("choseFile").click()}})};const m=t("data-v-1d7cbdb2");a("data-v-1d7cbdb2");const y={class:"add-icon"};n();const k=m((function(t,a,n,o,l,r){return i(),e("div",{class:"add-box",onClick:a[2]||(a[2]=(...e)=>o.onChoseFile(...e))},[s("div",y,[s("input",{type:"file",multiple:"",id:"choseFile",style:{visibility:"hidden",position:"absolute",top:"0px",width:"0px"},onChange:a[1]||(a[1]=e=>o.onSelectFiles(e.target.files))},null,32)])])}));h.render=k,h.__scopeId="data-v-1d7cbdb2",h.__file="src/components/EmptyFileList.vue";var F={props:["files"],setup(e,{emit:s}){const t=o(!1);return{fmtFiles:l(()=>{for(let s=0;s<e.files.length;s++)e.files[s].fmtSize=p(e.files[s].size);return e.files}),removeFile:e=>{s("onRemoveFile",e)},showActions:t,onMouseEnter:s=>{e.files.find(e=>e.id==s).showActions=!0},onMouseLeave:s=>{e.files.find(e=>e.id==s).showActions=!1}}}};const w=t("data-v-66adfb12");a("data-v-66adfb12");const b={class:"uploader-list"},M={class:"container",id:"uploaderList"},A={class:"info"},g={class:"name-text"},z={key:0,class:"file-status"},B={key:0,class:"prepare"},_={key:1,class:"transfering"},L={class:"precent"},x={key:2,class:"error"},C={key:3,class:"pause"},E={key:4,class:"cancel"},S={key:5,class:"success"},R={key:1,class:"file-size"},I={key:2,class:"file-operate"};n();const D=w((function(t,a,n,o,l,u){return i(),e("div",b,[s("ul",M,[(i(!0),e(r,null,c(o.fmtFiles,t=>(i(),e("li",{key:t.id,class:"file-list",onMouseenter:e=>o.onMouseEnter(t.id),onMouseleave:e=>o.onMouseLeave(t.id)},[s("div",{class:"process",style:{width:t.precent+"%"}},null,4),s("div",A,[s("div",{class:"file-name",title:t.name},[s("span",g,d(t.name),1)],8,["title"]),t.showActions?f("v-if",!0):(i(),e("div",z,["prepare"===t.status?(i(),e("span",B,"等待传输…")):f("v-if",!0),"transfering"===t.status?(i(),e("span",_,[s("em",L,d(t.precent)+"%",1)])):f("v-if",!0),"error"===t.status?(i(),e("span",x,"传输错误")):f("v-if",!0),"pause"===t.status?(i(),e("span",C,"已暂停")):f("v-if",!0),"cancel"===t.status?(i(),e("span",E,"已取消")):f("v-if",!0),"success"===t.status?(i(),e("span",S,"传输成功")):f("v-if",!0)])),t.showActions?f("v-if",!0):(i(),e("div",R,d(t.fmtSize),1)),t.showActions?(i(),e("div",I,[s("span",{class:"operate-remove",onClick:e=>o.removeFile(t.id)},"删除",8,["onClick"])])):f("v-if",!0)])],40,["onMouseenter","onMouseleave"]))),128))])])}));F.render=D,F.__scopeId="data-v-66adfb12",F.__file="src/components/SendFileList.vue";var P={props:["files"],setup(e,{emit:s}){const t=o(!1);return{fmtFiles:l(()=>{for(let s=0;s<e.files.length;s++)e.files[s].fmtSize=p(e.files[s].size);return e.files}),onDownloadFile:e=>{s("onDownloadFile",e)},showActions:t,onMouseEnter:s=>{e.files.find(e=>e.id==s).showActions=!0},onMouseLeave:s=>{e.files.find(e=>e.id==s).showActions=!1}}}};const T=t("data-v-69bd23bd");a("data-v-69bd23bd");const j={class:"uploader-list"},G={class:"container",id:"uploaderList"},K={class:"info"},N={class:"name-text"},Y={key:0,class:"file-status"},Z={key:0,class:"prepare"},q={key:1,class:"transfering"},H={class:"precent"},J={key:2,class:"error"},O={key:3,class:"pause"},Q={key:4,class:"cancel"},U={key:5,class:"success"},V={key:1,class:"file-size"},W={key:2,class:"file-operate"};n();const X=T((function(t,a,n,o,l,u){return i(),e("div",j,[s("ul",G,[(i(!0),e(r,null,c(o.fmtFiles,t=>(i(),e("li",{key:t.id,class:"file-list",onMouseenter:e=>o.onMouseEnter(t.id),onMouseleave:e=>o.onMouseLeave(t.id)},[s("div",{class:"process",style:{width:t.precent+"%"}},null,4),s("div",K,[s("div",{class:"file-name",title:t.name},[s("span",N,d(t.name),1)],8,["title"]),t.showActions?f("v-if",!0):(i(),e("div",Y,["prepare"===t.status?(i(),e("span",Z,"等待传输…")):f("v-if",!0),"transfering"===t.status?(i(),e("span",q,[s("em",H,d(t.precent)+"%",1)])):f("v-if",!0),"error"===t.status?(i(),e("span",J,"传输错误")):f("v-if",!0),"pause"===t.status?(i(),e("span",O,"已暂停")):f("v-if",!0),"cancel"===t.status?(i(),e("span",Q,"已取消")):f("v-if",!0),"success"===t.status?(i(),e("span",U,"传输成功")):f("v-if",!0)])),t.showActions?f("v-if",!0):(i(),e("div",V,d(t.fmtSize),1)),t.showActions?(i(),e("div",W,[s("span",{class:"operate-remove",onClick:e=>o.onDownloadFile(t.id)},"下载",8,["onClick"])])):f("v-if",!0)])],40,["onMouseenter","onMouseleave"]))),128))])])}));P.render=X,P.__scopeId="data-v-69bd23bd",P.__file="src/components/ReceiveFileList.vue";export{u as F,v as T,F as a,P as b,p as r,h as s};
