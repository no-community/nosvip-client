import{c as e,a as s,w as t,d as a,p as i,e as n,r as l,f as o,F as r,h as c,t as f,b as d}from"./index.e2d55984.js";class u{constructor(e){this.file=e,this.reader=new FileReader,this.offset=0}getNextChunk(){return new Promise((e,s)=>{this.offset>=this.file.size&&e({done:!0}),this.reader.onload=s=>{const t=s.target.result;this.offset+=t.byteLength,e({done:this.offset>=this.file.size,chunk:t,offset:this.offset})},this.reader.onabort=()=>{s(new Error("FileReader abort"))},this.reader.onerror=e=>{s(new Error("FileReader onerror"+e))};const t=this.file.slice(this.offset,this.offset+65536);this.reader.readAsArrayBuffer(t)})}}const p=e=>{if(null==e||""==e)return"0 Bytes";var s,t=new Array("Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"),a=parseFloat(e);s=Math.floor(Math.log(a)/Math.log(1024));var i=a/Math.pow(1024,s);return(i=i.toFixed(2))+t[s]};class v{constructor(e){this.id=e.id,this.name=e.name,this.size=e.size,this.status=e.status,this.precent=0}}var h={setup:(e,s)=>({onSelectFiles:e=>{s.emit("onSelectFiles",e)},onChoseFile:()=>{document.getElementById("choseFile").click()}})};const m=t("data-v-1d7cbdb2");i("data-v-1d7cbdb2");const y={class:"add-icon"};n();const k=m((function(t,i,n,l,o,r){return a(),e("div",{class:"add-box",onClick:i[2]||(i[2]=(...e)=>l.onChoseFile(...e))},[s("div",y,[s("input",{type:"file",multiple:"",id:"choseFile",style:{visibility:"hidden",position:"absolute",top:"0px",width:"0px"},onChange:i[1]||(i[1]=e=>l.onSelectFiles(e.target.files))},null,32)])])}));h.render=k,h.__scopeId="data-v-1d7cbdb2",h.__file="src/components/EmptyFileList.vue";var F={props:["files"],setup(e,{emit:s}){const t=l(!1);return{fmtFiles:o(()=>{for(let s=0;s<e.files.length;s++)e.files[s].fmtSize=p(e.files[s].size);return e.files}),removeFile:e=>{s("onRemoveFile",e)},showActions:t,onMouseEnter:()=>{t.value=!0},onMouseLeave:()=>{t.value=!1}}}};const b=t("data-v-66adfb12");i("data-v-66adfb12");const w={class:"uploader-list"},M={class:"container",id:"uploaderList"},g={class:"info"},z={class:"name-text"},B={key:0,class:"file-status"},_={key:0,class:"prepare"},A={key:1,class:"transfering"},L={class:"precent"},x={key:2,class:"error"},C={key:3,class:"pause"},E={key:4,class:"cancel"},S={key:5,class:"success"},R={key:1,class:"file-size"},I={key:2,class:"file-operate"};n();const D=b((function(t,i,n,l,o,u){return a(),e("div",w,[s("ul",M,[(a(!0),e(r,null,c(l.fmtFiles,t=>(a(),e("li",{key:t.id,class:"file-list",onMouseenter:i[1]||(i[1]=e=>l.onMouseEnter()),onMouseleave:i[2]||(i[2]=e=>l.onMouseLeave())},[s("div",{class:"process",style:{width:t.precent+"%"}},null,4),s("div",g,[s("div",{class:"file-name",title:t.name},[s("span",z,f(t.name),1)],8,["title"]),l.showActions?d("v-if",!0):(a(),e("div",B,["prepare"===t.status?(a(),e("span",_,"等待传输…")):d("v-if",!0),"transfering"===t.status?(a(),e("span",A,[s("em",L,f(t.precent)+"%",1)])):d("v-if",!0),"error"===t.status?(a(),e("span",x,"传输错误")):d("v-if",!0),"pause"===t.status?(a(),e("span",C,"已暂停")):d("v-if",!0),"cancel"===t.status?(a(),e("span",E,"已取消")):d("v-if",!0),"success"===t.status?(a(),e("span",S,"传输成功")):d("v-if",!0)])),l.showActions?d("v-if",!0):(a(),e("div",R,f(t.fmtSize),1)),l.showActions?(a(),e("div",I,[s("span",{class:"operate-remove",onClick:e=>l.removeFile(t.id)},"删除",8,["onClick"])])):d("v-if",!0)])],32))),128))])])}));F.render=D,F.__scopeId="data-v-66adfb12",F.__file="src/components/SendFileList.vue";var P={props:["files"],setup(e,{emit:s}){const t=l(!1);return{fmtFiles:o(()=>{for(let s=0;s<e.files.length;s++)e.files[s].fmtSize=p(e.files[s].size);return e.files}),onDownloadFile:e=>{s("onDownloadFile",e)},showActions:t,onMouseEnter:()=>{t.value=!0},onMouseLeave:()=>{t.value=!1}}}};const T=t("data-v-69bd23bd");i("data-v-69bd23bd");const j={class:"uploader-list"},G={class:"container",id:"uploaderList"},K={class:"info"},N={class:"name-text"},Y={key:0,class:"file-status"},Z={key:0,class:"prepare"},q={key:1,class:"transfering"},H={class:"precent"},J={key:2,class:"error"},O={key:3,class:"pause"},Q={key:4,class:"cancel"},U={key:5,class:"success"},V={key:1,class:"file-size"},W={key:2,class:"file-operate"};n();const X=T((function(t,i,n,l,o,u){return a(),e("div",j,[s("ul",G,[(a(!0),e(r,null,c(l.fmtFiles,t=>(a(),e("li",{key:t.id,class:"file-list",onMouseenter:i[1]||(i[1]=e=>l.onMouseEnter()),onMouseleave:i[2]||(i[2]=e=>l.onMouseLeave())},[s("div",{class:"process",style:{width:t.precent+"%"}},null,4),s("div",K,[s("div",{class:"file-name",title:t.name},[s("span",N,f(t.name),1)],8,["title"]),l.showActions?d("v-if",!0):(a(),e("div",Y,["prepare"===t.status?(a(),e("span",Z,"等待传输…")):d("v-if",!0),"transfering"===t.status?(a(),e("span",q,[s("em",H,f(t.precent)+"%",1)])):d("v-if",!0),"error"===t.status?(a(),e("span",J,"传输错误")):d("v-if",!0),"pause"===t.status?(a(),e("span",O,"已暂停")):d("v-if",!0),"cancel"===t.status?(a(),e("span",Q,"已取消")):d("v-if",!0),"success"===t.status?(a(),e("span",U,"传输成功")):d("v-if",!0)])),l.showActions?d("v-if",!0):(a(),e("div",V,f(t.fmtSize),1)),l.showActions?(a(),e("div",W,[s("span",{class:"operate-remove",onClick:e=>l.onDownloadFile(t.id)},"下载",8,["onClick"])])):d("v-if",!0)])],32))),128))])])}));P.render=X,P.__scopeId="data-v-69bd23bd",P.__file="src/components/ReceiveFileList.vue";export{u as F,v as T,F as a,P as b,p as r,h as s};
